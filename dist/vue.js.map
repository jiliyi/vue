{"version":3,"file":"vue.js","sources":["../src/utils.js","../src/observer/array.js","../src/observer/index.js","../src/initState.js","../src/compile/parser.js","../src/compile/generate.js","../src/compile/index.js","../src/vdom/patch.js","../src/lifecycle.js","../src/init.js","../src/vdom/index.js","../src/render.js","../src/index.js"],"sourcesContent":["export function isFunction(val){\r\n    return typeof val == 'function';\r\n}\r\nexport function isObject(val){\r\n    return typeof val == 'object' && val != 'null'\r\n}","const oldArrayProto = Array.prototype;\r\nconst Methods = ['splice', 'push', 'pop', 'shift', 'unshift', 'sort', 'reverse'];\r\nconst arrayMethods = Object.create(oldArrayProto)\r\n\r\narrayMethods.__proto__ = Array.prototype;\r\n\r\nMethods.forEach(method => {\r\n    arrayMethods[method] = function (...args) {\r\n        const ob = this.__ob__.observeArray;\r\n        oldArrayProto[method].call(this, ...args);\r\n        let addItem = null;\r\n        switch (method) {\r\n            case 'push':\r\n                addItem = args;\r\n                break;\r\n            case 'unshift':\r\n                addItem = args;\r\n                break;\r\n            case 'splice':\r\n                addItem = args.slice(2);\r\n                break;\r\n        }\r\n         ob(addItem)\r\n    }\r\n})\r\n\r\n\r\n\r\nexport default arrayMethods","import { isObject } from \"../utils\";\r\n\r\nimport arrayMethods from './array'\r\n\r\n\r\n\r\nclass Observer{\r\n    constructor(data){\r\n        if(Array.isArray(data)){\r\n            //对数组进行劫持;\r\n            data.__proto__ = arrayMethods;\r\n            data.__ob__ = this;\r\n           this.observeArray(data);\r\n        }else{\r\n            this.walk(data);\r\n        }\r\n    }\r\n    walk(data){\r\n        Object.keys(data).forEach(key=>{\r\n            defineReactive(data,key,data[key])\r\n        })\r\n    }\r\n    observeArray(data){\r\n        data.forEach(item=>{\r\n            observe(item)\r\n        })\r\n    }\r\n   \r\n}\r\n\r\n\r\nfunction defineReactive(obj,key,val){\r\n    observe(val);\r\n    Object.defineProperty(obj,key,{\r\n        get(){\r\n            \r\n            return val\r\n        },\r\n        set(newV){\r\n            observe(newV)\r\n            val = newV;\r\n        }\r\n    })\r\n}\r\n\r\nexport function observe(data){\r\n    //传入的不是对象，不监测\r\n    if(!isObject(data)) return\r\n    \r\n    new Observer(data);\r\n}","import { isFunction } from \"./utils\";\r\nimport { observe } from './observer/index'\r\n//初始化状态\r\nexport default function initState(vm){\r\n    let options = vm.$options;\r\n    \r\n    if(options.data){\r\n        //初始化data\r\n        initData(vm);\r\n    }\r\n    \r\n    if(options.methods){\r\n        //初始化methods\r\n    }\r\n    if(options.props){\r\n        //初始化props\r\n    }\r\n    if(options.computed){\r\n        //初始化computed\r\n    }\r\n    if(options.watch){\r\n        //初始化watch\r\n    }\r\n\r\n}\r\n\r\nfunction proxy(vm,source,key){\r\n    Object.defineProperty(vm,key,{\r\n        get(){\r\n            return vm[source][key];\r\n        },\r\n        set(newVal){\r\n            vm[source][key] = newVal;\r\n        }\r\n    })    \r\n}\r\n\r\nfunction initData(vm){\r\n    let options = vm.$options;\r\n    let data = options.data;\r\n    data = vm._data = isFunction(data) ? data.call(vm) : data;\r\n    \r\n    for(let key in data){\r\n        //代理，可通过实例直接取数据\r\n        proxy(vm,'_data',key)\r\n    }\r\n    \r\n    observe(data);\r\n}","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; // 标签名 \r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`; //  用来获取的标签名的 match后的索引为1的\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 匹配开始标签的 \r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配闭合标签的\r\n//           aa  =   \"  xxx \"  | '  xxxx '  | xxx\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // a=b  a=\"b\"  a='b'\r\nconst startTagClose = /^\\s*(\\/?)>/; //     />   <div/>\r\n\r\n//  <div id=\"app\" name=aa age='19'>\r\n//      <ul data-id=\"10\">\r\n//          <li>{{text}}</li>\r\n//          <li class=\"item\">{{一小项}}</li>\r\n//      </ul>\r\n//  </div> \r\n\r\nlet stack = [];\r\n\r\nlet root;\r\n\r\n// const arr = {\r\n//     tag: 'xx',\r\n//     parent : ''\r\n//     attribute: [],\r\n//     children: [\r\n//         { tagName: 'a', attribute: [], children: [] },\r\n//         { tagName: 'a', attribute: [], children: [] },\r\n//     ]\r\n// }\r\n\r\n/**\r\n * 处理开始标签的token\r\n * @param {*} tagName \r\n * @param {*} attributes \r\n */\r\nfunction start(tagName, attributes) {\r\n    let parent = stack[stack.length - 1];\r\n    let element = {\r\n        tag: tagName,\r\n        type: 1, // 类型为dom\r\n        attributes,\r\n        children: []\r\n    }\r\n    if (parent) {\r\n        parent.children.push(element);\r\n    }else{\r\n        root = element;\r\n    }\r\n    element.parent = parent;\r\n    stack.push(element);\r\n}\r\n\r\nfunction char(text) {\r\n    text = text.replace(/\\s/g, '');\r\n    if (text) {\r\n        let cur = stack[stack.length - 1];\r\n        cur.children.push({\r\n            type: 3,//指代文本元素\r\n            text,\r\n        })\r\n    }\r\n}\r\n\r\nfunction end(tagName) { // 处理结束标签\r\n    let last = stack.pop();\r\n    if (last.tag !== tagName) {\r\n        throw new Error('endTag Not Match')\r\n    }  \r\n}\r\n\r\nexport default function parserHTML(html) {\r\n\r\n    function advance(len) {\r\n        html = html.substring(len);\r\n    }\r\n\r\n    function parseStartTag() {\r\n        const start = html.match(startTagOpen);\r\n        if (start) {\r\n            const match = {\r\n                tagName: start[1],\r\n                attributes: []\r\n            }\r\n            //删除匹配成功的部分\r\n            advance(start[0].length);\r\n\r\n            //下一步，匹配属性\r\n            let end, attr;\r\n            while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\r\n                match.attributes.push({\r\n                    name: attr[1],\r\n                    value: attr[3] || attr[4] || attr[5]\r\n                })\r\n                advance(attr[0].length);\r\n            }\r\n            advance(end[0].length); //删除开始标签的 >\r\n            return match;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    while (html) {//有html继续解析\r\n\r\n        let textEnd = html.indexOf('<');\r\n        if (textEnd === 0) {//step one 开始标签\r\n            let startTagMatch = parseStartTag()\r\n            if (startTagMatch) {\r\n                start(startTagMatch.tagName, startTagMatch.attributes)\r\n            }\r\n\r\n            let endTagMatch = html.match(endTag); // step three 结束标签\r\n            if (endTagMatch) {\r\n                end(endTagMatch[1])\r\n                advance(endTagMatch[0].length);\r\n            }\r\n        }\r\n\r\n        let text;\r\n        if (textEnd > 0) {\r\n            text = html.substring(0, textEnd);\r\n        }\r\n        if (text) {\r\n            advance(text.length)\r\n            char(text)\r\n        }\r\n    }\r\n    return root;\r\n}\r\n","const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g; // {{aaaaa}}\r\n\r\nfunction genAttr(attributes) {\r\n    let str = '';\r\n    for (const attr of attributes) {\r\n\r\n        if (attr.name === 'style') {\r\n\r\n            let styleObj = {}\r\n            attr.value.replace(/([^:;]+)\\:([^:;]+)/g, function (n1, n2, n3) {\r\n                styleObj[n2] = n3;\r\n            })\r\n            attr.value = styleObj\r\n\r\n        }\r\n        str += `${attr.name}:${JSON.stringify(attr.value)},`\r\n\r\n\r\n    }\r\n    return `{${str.slice(0, -1)}}`;\r\n}\r\n\r\nfunction genChar(char) {\r\n\r\n    let text = char.text;\r\n    if (!defaultTagRE.test(text)) {\r\n\r\n        return `_v(${text})`;\r\n\r\n    } else {\r\n\r\n        defaultTagRE.lastIndex = 0;\r\n        let tokens = [];\r\n        let match;\r\n        let lastIndex = 0;\r\n        while (match = defaultTagRE.exec(text)) { // name {{ age }} sex {{a }}\r\n\r\n            let index = match.index;\r\n            if (index > lastIndex) {\r\n                \r\n                tokens.push(JSON.stringify(text.slice(lastIndex, index)));\r\n            }\r\n\r\n            tokens.push(`_s(${match[1]})`) // 处理可能是对象的情况\r\n            lastIndex = match[0].length + index;\r\n        }\r\n\r\n        if (lastIndex < text.length) {\r\n            tokens.push(JSON.stringify(text.slice(lastIndex)))\r\n        }\r\n\r\n        return `_v(${tokens.join('+')})`;\r\n    }\r\n}\r\n\r\nfunction genChildren(el) {\r\n    let str = '';\r\n    for (const child of el.children) {\r\n        if (child.type === 1) {\r\n            str += `${generate(child)},`;\r\n        } else {\r\n            str += `${genChar(child)},`;\r\n        }\r\n\r\n    }\r\n    return `${str.slice(0, -1)}`;\r\n}\r\n\r\nexport default function generate(root) { //_c('div',{id:'app',name : '1'},'text')\r\n\r\n    let children = genChildren(root);\r\n\r\n    return `_c('${root.tag}',${root.attributes.length ? genAttr(root.attributes) : undefined}${children ? `,${children}` : ''})`\r\n}","import parserHTML from './parser';\r\nimport generate from './generate';\r\nexport default function (template) {\r\n\r\n    let root = parserHTML(template);\r\n\r\n    let code = generate(root);\r\n\r\n    return new Function(`with(this){return ${code}}`) // 模板引擎\r\n}","export function patch(oldVnde, vnode) {\r\n    if (oldVnde.nodeType === 1) {\r\n        let parent = oldVnde.parentNode;\r\n        let node = createEle(vnode)\r\n        parent.insertBefore(node, oldVnde.nextSibling)\r\n        parent.removeChild(oldVnde)\r\n    }\r\n    return vnode.el\r\n}\r\n\r\nfunction createEle(vnode) {\r\n    let { tag, text, children } = vnode;\r\n\r\n    if (tag) {\r\n        vnode.el = document.createElement(tag);\r\n        if (children.length) {\r\n            for (const child of children) {\r\n                vnode.el.appendChild(createEle(child))\r\n            }\r\n        }\r\n    } else {\r\n        vnode.el = document.createTextNode(text)\r\n    }\r\n\r\n    return vnode.el;\r\n}   ","import { patch } from \"./vdom/patch\"\r\n\r\nexport function lifeCycleMixin(Vue) {\r\n    Vue.prototype._update = function (vnode) {\r\n        const vm = this;\r\n        let r = patch(vm.$el,vnode);\r\n        console.log(r)  \r\n    }\r\n}\r\n\r\nexport function mountComponent(vm) {\r\n\r\n    let updateComponent = function () {\r\n        vm._update(vm._render())\r\n    }\r\n\r\n    updateComponent()\r\n}","import initState from './initState.js';\r\nimport compileToFunction from './compile/index.js';\r\nimport { mountComponent } from './lifecycle.js';\r\n\r\nexport function initMixin(Vue) {\r\n\r\n    Vue.prototype._init = function (options) {\r\n\r\n        let vm = this;\r\n        vm.$options = options;\r\n        initState(vm)\r\n\r\n        if (options.el) {\r\n            this.$mount(options.el)\r\n        }\r\n    }\r\n\r\n    Vue.prototype.$mount = function (el) {\r\n\r\n        el = document.querySelector(el)\r\n        const vm = this;\r\n        vm.$el = el;\r\n        const options = vm.$options;\r\n        if (!options.render) {\r\n            //用户没传render\r\n            let template = options.template;\r\n            if (!template && el) {\r\n                template = el.outerHTML;\r\n            }\r\n            vm.$options.render = compileToFunction(template);\r\n        }\r\n\r\n        mountComponent(vm)\r\n\r\n    }\r\n}","export function createElement(vm, tag, data = {},...children) {\r\n\r\n    return vNode(vm,tag,data,data.key,children,undefined);\r\n}\r\n\r\nexport function createTextNode(vm, text) {\r\n\r\n    return vNode(vm,undefined,undefined,undefined,undefined,text);\r\n}\r\n\r\nfunction vNode(vm, tag, data, key, children, text) {\r\n    return {\r\n        vm,\r\n        tag,\r\n        data,\r\n        key,\r\n        children,\r\n        text\r\n    }\r\n}","import { createElement, createTextNode } from \"./vdom/index\";\r\n\r\nexport function renderMixin(Vue) {\r\n\r\n    Vue.prototype._c = function () {\r\n        const vm = this;\r\n       return createElement(vm,...arguments)\r\n    }\r\n\r\n    Vue.prototype._v = function () {\r\n        const vm = this;\r\n        return createTextNode(vm,...arguments);\r\n    }\r\n\r\n    Vue.prototype._s = function (text) {\r\n\r\n        if(typeof text == 'object') return JSON.stringify(text);\r\n        return text;\r\n    }\r\n\r\n    Vue.prototype._render = function () {\r\n\r\n        const vm = this;\r\n        const render = vm.$options.render;\r\n        const vnode = render.call(vm);\r\n        return vnode;\r\n    }\r\n}","import { initMixin } from \"./init.js\";\r\nimport { lifeCycleMixin } from \"./lifecycle.js\";\r\nimport { renderMixin } from './render.js';\r\n\r\nfunction Vue(options){\r\n    this._init(options);\r\n}\r\n\r\ninitMixin(Vue)\r\nlifeCycleMixin(Vue)\r\nrenderMixin(Vue)\r\n\r\nexport default  Vue;"],"names":["isFunction","val","isObject","oldArrayProto","Array","prototype","Methods","arrayMethods","Object","create","__proto__","forEach","method","ob","__ob__","observeArray","args","call","addItem","slice","Observer","data","isArray","walk","keys","key","defineReactive","item","observe","obj","defineProperty","get","set","newV","initState","vm","options","$options","initData","methods","props","computed","watch","proxy","source","newVal","_data","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","stack","root","start","tagName","attributes","parent","length","element","tag","type","children","push","char","text","replace","cur","end","last","pop","Error","parserHTML","html","advance","len","substring","parseStartTag","match","attr","name","value","textEnd","indexOf","startTagMatch","endTagMatch","defaultTagRE","genAttr","str","styleObj","n1","n2","n3","JSON","stringify","genChar","test","lastIndex","tokens","exec","index","join","genChildren","el","child","generate","undefined","template","code","Function","patch","oldVnde","vnode","nodeType","parentNode","node","createEle","insertBefore","nextSibling","removeChild","document","createElement","appendChild","createTextNode","lifeCycleMixin","Vue","_update","r","$el","console","log","mountComponent","updateComponent","_render","initMixin","_init","$mount","querySelector","render","outerHTML","compileToFunction","vNode","renderMixin","_c","arguments","_v","_s"],"mappings":"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"}